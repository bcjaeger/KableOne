\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}


\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

A demo of the KableOne package. First, make the table:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{suppressPackageStartupMessages}\hlstd{(}
  \hlstd{\{}
    \hlkwd{library}\hlstd{(labelled)}
    \hlkwd{library}\hlstd{(tidyverse)}
    \hlkwd{library}\hlstd{(magrittr)}
    \hlkwd{library}\hlstd{(survival)}
    \hlkwd{library}\hlstd{(kableExtra)}
    \hlkwd{library}\hlstd{(KableOne)}
  \hlstd{\}}
\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: package 'labelled' was built under R version 3.5.3}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning: package 'tidyr' was built under R version 3.5.3}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning: package 'purrr' was built under R version 3.5.3}}\begin{alltt}
\hlstd{tbl_one} \hlkwb{=} \hlstd{pbc} \hlopt{%>%}
  \hlkwd{as_tibble}\hlstd{()} \hlopt{%>%}
  \hlstd{dplyr}\hlopt{::}\hlkwd{select}\hlstd{(}
    \hlstd{age, sex, status, trt, stage, ascites, bili, edema, albumin}
  \hlstd{)} \hlopt{%>%}
  \hlstd{dplyr}\hlopt{::}\hlkwd{mutate}\hlstd{(}
    \hlkwc{status}\hlstd{=}\hlkwd{factor}\hlstd{(}
      \hlstd{status,} \hlkwc{levels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{0}\hlopt{:}\hlnum{2}\hlstd{),}
      \hlkwc{labels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"Censored"}\hlstd{,} \hlstr{"Transplant"}\hlstd{,} \hlstr{"Dead"}\hlstd{)}
    \hlstd{),}
    \hlkwc{stage} \hlstd{=} \hlkwd{factor}\hlstd{(}
      \hlstd{stage,} \hlkwc{levels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{1}\hlopt{:}\hlnum{4}\hlstd{),}
      \hlkwc{labels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"One"}\hlstd{,} \hlstr{"Two"}\hlstd{,} \hlstr{"Three"}\hlstd{,} \hlstr{"Four"}\hlstd{)}
    \hlstd{),}
    \hlkwc{trt}\hlstd{=}\hlkwd{factor}\hlstd{(}
      \hlstd{trt,} \hlkwc{levels}\hlstd{=}\hlkwd{c}\hlstd{(}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{),}
      \hlkwc{labels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"Drug A"}\hlstd{,} \hlstr{"Drug B"}\hlstd{)}
    \hlstd{),}
    \hlkwc{ascites}\hlstd{=}\hlkwd{factor}\hlstd{(}
      \hlstd{ascites,} \hlkwc{levels}\hlstd{=}\hlkwd{c}\hlstd{(}\hlnum{0}\hlopt{:}\hlnum{1}\hlstd{),}
      \hlkwc{labels} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"No"}\hlstd{,} \hlstr{"Yes"}\hlstd{)}
    \hlstd{),}
    \hlkwc{sex} \hlstd{=} \hlkwd{fct_recode}\hlstd{(}
      \hlstd{sex,}
      \hlstr{'Male'}\hlstd{=}\hlstr{'m'}\hlstd{,}
      \hlstr{'Female'}\hlstd{=}\hlstr{'f'}
    \hlstd{),}
    \hlkwc{edema} \hlstd{=} \hlkwd{factor}\hlstd{(}
      \hlstd{edema,}
      \hlkwc{levels}\hlstd{=}\hlkwd{c}\hlstd{(}\hlnum{0}\hlstd{,} \hlnum{0.5}\hlstd{,} \hlnum{1}\hlstd{),}
      \hlkwc{labels}\hlstd{=}\hlkwd{c}\hlstd{(}\hlstr{"None"}\hlstd{,} \hlstr{"A little"}\hlstd{,} \hlstr{"Lots"}\hlstd{)}
    \hlstd{)}
  \hlstd{)} \hlopt{%>%}
  \hlkwd{set_variable_labels}\hlstd{(}
    \hlkwc{status} \hlstd{=} \hlstr{"Status at last contact"}\hlstd{,}
    \hlkwc{trt} \hlstd{=} \hlstr{"Treatment group"}\hlstd{,}
    \hlkwc{age} \hlstd{=} \hlstr{'Age, years'}\hlstd{,}
    \hlkwc{sex} \hlstd{=} \hlstr{'Sex at birth'}\hlstd{,}
    \hlkwc{ascites} \hlstd{=} \hlstr{'Ascites'}\hlstd{,}
    \hlkwc{bili} \hlstd{=} \hlstr{'Bilirubin levels, mg/dl'}\hlstd{,}
    \hlkwc{edema} \hlstd{=} \hlstr{'Is there Edema?'}
  \hlstd{)} \hlopt{%>%}
  \hlkwd{set_variable_groups}\hlstd{(}
    \hlkwc{Outcomes} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{'status'}\hlstd{),}
    \hlkwc{Exposures} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{'ascites'}\hlstd{,}\hlstr{'bili'}\hlstd{,}\hlstr{'edema'}\hlstd{,}\hlstr{'trt'}\hlstd{,}\hlstr{'albumin'}\hlstd{,}\hlstr{'stage'}\hlstd{)}
  \hlstd{)} \hlopt{%>%}
  \hlkwd{tibble_one}\hlstd{(}
    \hlkwc{strat}\hlstd{=}\hlstr{'trt'}\hlstd{,}
    \hlkwc{include.allcats} \hlstd{=} \hlnum{TRUE}\hlstd{,}
    \hlkwc{include.freq} \hlstd{=} \hlnum{FALSE}\hlstd{,}
    \hlkwc{include.pval} \hlstd{=} \hlnum{TRUE}
  \hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}


Print the table:


\begin{kframe}
\begin{alltt}
\hlkwd{kibble_one}\hlstd{(}
  \hlstd{tbl_one,}
  \hlkwc{use.groups} \hlstd{=} \hlnum{TRUE}\hlstd{,}
  \hlkwc{format} \hlstd{=} \hlstr{'latex'}\hlstd{,}
  \hlkwc{booktabs} \hlstd{=} \hlnum{TRUE}\hlstd{,}
  \hlkwc{escape}\hlstd{=}\hlnum{FALSE}\hlstd{,}
  \hlkwc{linesep}\hlstd{=}\hlstr{''}
\hlstd{)} \hlopt{%>%}
  \hlkwd{kable_styling}\hlstd{(}
    \hlkwc{position} \hlstd{=} \hlstr{'center'}
  \hlstd{)} \hlopt{%>%}
  \hlkwd{column_spec}\hlstd{(}\hlnum{1}\hlstd{,} \hlkwc{width} \hlstd{=} \hlstr{"4cm"}\hlstd{)}
\end{alltt}
\end{kframe}\begin{table}[H]
\centering
\begin{tabular}{>{\raggedright\arraybackslash}p{4cm}cccc}
\toprule
\multicolumn{2}{c}{\textbf{ }} & \multicolumn{2}{c}{\textbf{Treatment group}} & \multicolumn{1}{c}{\textbf{ }} \\
\cmidrule(l{3pt}r{3pt}){3-4}
  & Overall & Drug A & Drug B & P-value\\
\midrule
No. of observations & 418 & 158 & 154 & $  $\\
Age, years & 50.7 (10.4) & 51.4 (11.0) & 48.6 (9.96) & $ 0.018 $\\
Sex at birth &  &  &  & $ 0.421 $\\
\hspace{1em}Male & 10.5 & 13.3 & 9.74 & $  $\\
\hspace{1em}Female & 89.5 & 86.7 & 90.3 & $  $\\
\addlinespace[0.5em]
\multicolumn{5}{l}{\textbf{Exposures}}\\
\hline
\\[-0.5em]\hspace{1em}Stage &  &  &  & $ 0.201 $\\
\hspace{1em}\hspace{1em}One & 5.10 & 7.59 & 2.60 & $  $\\
\hspace{1em}\hspace{1em}Two & 22.3 & 22.2 & 20.8 & $  $\\
\hspace{1em}\hspace{1em}Three & 37.6 & 35.4 & 41.6 & $  $\\
\hspace{1em}\hspace{1em}Four & 35.0 & 34.8 & 35.1 & $  $\\
\hspace{1em}Ascites &  &  &  & $ 0.567 $\\
\hspace{1em}\hspace{1em}No & 92.3 & 91.1 & 93.5 & $  $\\
\hspace{1em}\hspace{1em}Yes & 7.69 & 8.86 & 6.49 & $  $\\
\hspace{1em}Bilirubin levels, mg/dl & 3.22 (4.41) & 2.87 (3.63) & 3.65 (5.28) & $ 0.133 $\\
\hspace{1em}Is there Edema? &  &  &  & $ 0.877 $\\
\hspace{1em}\hspace{1em}None & 84.7 & 83.5 & 85.1 & $  $\\
\hspace{1em}\hspace{1em}A little & 10.5 & 10.1 & 8.44 & $  $\\
\hspace{1em}\hspace{1em}Lots & 4.78 & 6.33 & 6.49 & $  $\\
\hspace{1em}Albumin & 3.50 (0.42) & 3.52 (0.44) & 3.52 (0.40) & $ 0.874 $\\
\addlinespace[0.5em]
\multicolumn{5}{l}{\textbf{Outcomes}}\\
\hline
\\[-0.5em]\hspace{1em}Status at last contact &  &  &  & $ 0.894 $\\
\hspace{1em}\hspace{1em}Censored & 55.5 & 52.5 & 55.2 & $  $\\
\hspace{1em}\hspace{1em}Transplant & 5.98 & 6.33 & 5.84 & $  $\\
\hspace{1em}\hspace{1em}Dead & 38.5 & 41.1 & 39.0 & $  $\\
\bottomrule
\end{tabular}
\end{table}




\end{document}
